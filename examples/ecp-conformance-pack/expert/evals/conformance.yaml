suite_id: conformance
suite_version: '1.0'
description: Offline conformance checks for response shape and citation integrity.
cases:
  - case_id: response-shape-auth
    mode: ephemeral
    question: Which modules handle authentication?
    filters:
      source_id: repo
    assertions:
      response_must_include_fields:
        - answer
        - as_of
        - citations
        - chunks
        - synthesis
      as_of_must_include_source_ids:
        - repo
      min_citations: 1
      must_cite_source_ids:
        - repo
      must_cite:
        - auth.py
      citations_must_resolve: true
      citations_must_match_snippets: true
      citations_must_match_hashes: true

  - case_id: response-shape-db
    mode: ephemeral
    question: Where is database access implemented?
    filters:
      source_id: repo
    assertions:
      response_must_include_fields:
        - answer
        - as_of
        - citations
        - chunks
        - synthesis
      as_of_must_include_source_ids:
        - repo
      min_citations: 1
      must_cite_source_ids:
        - repo
      must_cite:
        - db.py
      citations_must_resolve: true
      citations_must_match_snippets: true
      citations_must_match_hashes: true
